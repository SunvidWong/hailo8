# Hailo8 è¿œç¨‹éƒ¨ç½²æŒ‡å—

ğŸš€ **å®Œæ•´çš„ç”Ÿäº§ç¯å¢ƒè¿œç¨‹éƒ¨ç½²è§£å†³æ–¹æ¡ˆ**

## ğŸ“‹ éƒ¨ç½²æ¦‚è¿°

æœ¬æŒ‡å—æä¾›äº†åœ¨ç”Ÿäº§ç¯å¢ƒè¿œç¨‹æœåŠ¡å™¨ä¸Šéƒ¨ç½²Hailo8å®¹å™¨åŒ–AIæ¨ç†æœåŠ¡çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼ŒåŒ…å«è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ã€é…ç½®ç®¡ç†å’Œç›‘æ§ä½“ç³»ã€‚

## ğŸ¯ éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¿œç¨‹ç”Ÿäº§æœåŠ¡å™¨                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Hailo8 PCIe Hardware                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            Docker Compose Services                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ Hailo Runtimeâ”‚  â”‚    Nginx (SSL + è´Ÿè½½å‡è¡¡)   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚   + gRPC     â”‚  â”‚                             â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚AI Services  â”‚  â”‚     Monitoring Stack       â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ (å¤šå‰¯æœ¬)    â”‚  â”‚ Prometheus + Grafana + ELK â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### æœåŠ¡å™¨é…ç½®
- **CPU**: 4æ ¸å¿ƒä»¥ä¸Šï¼Œæ¨è8æ ¸å¿ƒ
- **å†…å­˜**: 16GBä»¥ä¸Šï¼Œæ¨è32GB
- **å­˜å‚¨**: 100GBä»¥ä¸ŠSSDå­˜å‚¨
- **ç½‘ç»œ**: åƒå…†ç½‘ç»œè¿æ¥
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / CentOS 8+ / RHEL 8+

### è½¯ä»¶è¦æ±‚
- **Docker**: 20.10+
- **Docker Compose**: 2.0+
- **SSH**: å¼€æ”¾22ç«¯å£æˆ–å…¶ä»–æŒ‡å®šç«¯å£
- **åŸŸå**: é…ç½®åŸŸåè§£æï¼ˆå¯é€‰ï¼ŒHTTPSéœ€è¦ï¼‰

### ç¡¬ä»¶è¦æ±‚
- **Hailo8 PCIeåŠ é€Ÿå¡**: å·²æ­£ç¡®å®‰è£…å¹¶è¯†åˆ«
- **æƒé™**: rootæƒé™æˆ–sudoæƒé™

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### 1. å‡†å¤‡æœ¬åœ°ç¯å¢ƒ

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/SunvidWong/hailo8.git
cd hailo8/containers

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.remote .env
vim .env  # ä¿®æ”¹é…ç½®
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å…³é”®å‚æ•°ï¼š

```bash
# æœåŠ¡å™¨é…ç½®
DOMAIN=hailo-api.yourdomain.com          # æ‚¨çš„åŸŸå
API_URL=https://hailo-api.yourdomain.com
TZ=Asia/Shanghai                         # æ—¶åŒº

# å®‰å…¨é…ç½®
JWT_SECRET_KEY=your-super-secret-key     # JWTå¯†é’¥
GRAFANA_PASSWORD=your-secure-password    # Grafanaå¯†ç 

# æ•°æ®å­˜å‚¨
DATA_PATH=/opt/hailo8/data               # æ•°æ®å­˜å‚¨è·¯å¾„
```

### 3. ä¸€é”®éƒ¨ç½²

```bash
# åŸºæœ¬éƒ¨ç½²
./deploy-remote.sh 192.168.1.100

# æŒ‡å®šç”¨æˆ·å’Œç«¯å£
./deploy-remote.sh -u deploy -p 2222 192.168.1.100

# å¸¦å¤‡ä»½çš„éƒ¨ç½²
./deploy-remote.sh -b 192.168.1.100
```

## ğŸ“ éƒ¨ç½²è„šæœ¬è¯¦è§£

### åŸºæœ¬ç”¨æ³•

```bash
./deploy-remote.sh [é€‰é¡¹] <æœåŠ¡å™¨åœ°å€>

é€‰é¡¹:
  -p, --port PORT        SSHç«¯å£ (é»˜è®¤: 22)
  -u, --user USER        SSHç”¨æˆ· (é»˜è®¤: root)
  -d, --path PATH        éƒ¨ç½²è·¯å¾„ (é»˜è®¤: /opt/hailo8)
  -f, --file FILE        Composeæ–‡ä»¶ (é»˜è®¤: docker-compose.remote.yml)
  -e, --env ENV          ç¯å¢ƒæ–‡ä»¶ (é»˜è®¤: .env.remote)
  -b, --backup           éƒ¨ç½²å‰å¤‡ä»½ç°æœ‰æœåŠ¡
  -r, --rollback         å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
  -s, --skip-ssl         è·³è¿‡SSLè¯ä¹¦æ£€æŸ¥
  -h, --help             æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### éƒ¨ç½²ç¤ºä¾‹

```bash
# 1. æ ‡å‡†éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨
./deploy-remote.sh 192.168.1.100

# 2. éƒ¨ç½²åˆ°ç‰¹å®šç”¨æˆ·çš„äº‘æœåŠ¡å™¨
./deploy-remote.sh -u ubuntu -p 2222 203.0.113.10

# 3. è‡ªå®šä¹‰éƒ¨ç½²è·¯å¾„
./deploy-remote.sh -d /data/hailo8 192.168.1.100

# 4. å¸¦å¤‡ä»½çš„å®‰å…¨éƒ¨ç½²
./deploy-remote.sh -b 192.168.1.100

# 5. å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
./deploy-remote.sh -r 192.168.1.100
```

## ğŸ”’ å®‰å…¨é…ç½®

### SSLè¯ä¹¦é…ç½®

#### æ–¹æ¡ˆ1: ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦

```bash
# åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…Certbot
ssh root@your-server
apt install certbot python3-certbot-nginx

# ç”³è¯·è¯ä¹¦
certbot --nginx -d hailo-api.yourdomain.com

# è‡ªåŠ¨ç»­æœŸ
echo "0 12 * * * /usr/bin/certbot renew --quiet" | crontab -
```

#### æ–¹æ¡ˆ2: ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼ˆæµ‹è¯•ç”¨ï¼‰

```bash
# ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout nginx/ssl/key.pem \
  -out nginx/ssl/cert.pem \
  -subj "/C=CN/ST=State/L=City/O=Organization/CN=hailo-api.local"
```

### é˜²ç«å¢™é…ç½®

```bash
# Ubuntu/Debian
ufw allow 22/tcp      # SSH
ufw allow 80/tcp      # HTTP
ufw allow 443/tcp     # HTTPS
ufw enable

# CentOS/RHEL
firewall-cmd --permanent --add-service=ssh
firewall-cmd --permanent --add-service=http
firewall-cmd --permanent --add-service=https
firewall-cmd --reload
```

## ğŸ“Š ç›‘æ§é…ç½®

### PrometheusæŒ‡æ ‡æ”¶é›†

ç³»ç»Ÿè‡ªåŠ¨æ”¶é›†ä»¥ä¸‹æŒ‡æ ‡ï¼š
- **æœåŠ¡æŒ‡æ ‡**: APIå“åº”æ—¶é—´ã€è¯·æ±‚é‡ã€é”™è¯¯ç‡
- **ç³»ç»ŸæŒ‡æ ‡**: CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œä½¿ç”¨ç‡
- **å®¹å™¨æŒ‡æ ‡**: Dockerå®¹å™¨çŠ¶æ€ã€èµ„æºä½¿ç”¨
- **ç¡¬ä»¶æŒ‡æ ‡**: Hailo8è®¾å¤‡æ¸©åº¦ã€åŠŸè€—ï¼ˆå¦‚æœæ”¯æŒï¼‰

### Grafanaä»ªè¡¨æ¿

è®¿é—®åœ°å€ï¼š`http://your-server:3001`

é»˜è®¤è´¦å·ï¼š`admin` / `your-password`

ä¸»è¦ä»ªè¡¨æ¿ï¼š
- **ç³»ç»Ÿæ€»è§ˆ**: æ•´ä½“æœåŠ¡çŠ¶æ€
- **APIæ€§èƒ½**: æ¥å£å“åº”æ—¶é—´å’Œé”™è¯¯ç‡
- **ç¡¬ä»¶ç›‘æ§**: Hailo8è®¾å¤‡çŠ¶æ€
- **å®¹å™¨ç›‘æ§**: Dockerå®¹å™¨èµ„æºä½¿ç”¨

### æ—¥å¿—æ”¶é›†

ä½¿ç”¨ELK Stackæ”¶é›†å’Œåˆ†ææ—¥å¿—ï¼š
- **Elasticsearch**: æ—¥å¿—å­˜å‚¨å’Œæœç´¢
- **Logstash**: æ—¥å¿—å¤„ç†å’Œè½¬æ¢
- **Kibana**: æ—¥å¿—å¯è§†åŒ–ç•Œé¢

è®¿é—®åœ°å€ï¼š`http://your-server:5601`

## ğŸ”§ è¿ç»´ç®¡ç†

### æœåŠ¡ç®¡ç†

```bash
# SSHè¿æ¥åˆ°æœåŠ¡å™¨
ssh root@your-server

# è¿›å…¥éƒ¨ç½²ç›®å½•
cd /opt/hailo8

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart hailo-runtime

# æ›´æ–°æœåŠ¡
docker-compose pull
docker-compose up -d

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# å®Œå…¨æ¸…ç†ï¼ˆåŒ…æ‹¬æ•°æ®ï¼‰
docker-compose down -v
```

### å¤‡ä»½æ¢å¤

```bash
# æ‰‹åŠ¨å¤‡ä»½
cd /opt/hailo8
docker-compose exec hailo-runtime tar -czf /tmp/backup-$(date +%Y%m%d).tar.gz /app/data

# è‡ªåŠ¨å¤‡ä»½ï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹ï¼‰
# å·²åœ¨docker-composeä¸­é…ç½®db-backupæœåŠ¡

# æ¢å¤å¤‡ä»½
./deploy-remote.sh -r your-server
```

### æ€§èƒ½ä¼˜åŒ–

```bash
# è°ƒæ•´Dockerèµ„æºé™åˆ¶
vim docker-compose.remote.yml

# ä¿®æ”¹æœåŠ¡å‰¯æœ¬æ•°
# åœ¨AIæœåŠ¡ä¸­å¢åŠ  replicas: 3

# è°ƒæ•´ç³»ç»Ÿå‚æ•°
echo 'vm.max_map_count=262144' >> /etc/sysctl.conf
sysctl -p
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. SSHè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥SSHæœåŠ¡
systemctl status ssh

# æ£€æŸ¥é˜²ç«å¢™
ufw status

# æ£€æŸ¥SSHå¯†é’¥
ssh-keygen -l -f ~/.ssh/id_rsa.pub
```

#### 2. DockeræœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
docker-compose logs hailo-runtime

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h

# é‡å¯DockeræœåŠ¡
systemctl restart docker
```

#### 3. Hailoè®¾å¤‡è®¿é—®å¤±è´¥
```bash
# æ£€æŸ¥è®¾å¤‡æƒé™
ls -la /dev/hailo*

# æ£€æŸ¥é©±åŠ¨æ¨¡å—
lsmod | grep hailo

# æŸ¥çœ‹å†…æ ¸æ—¥å¿—
dmesg | grep hailo

# é‡æ–°é…ç½®è®¾å¤‡æƒé™
./setup_device_permissions.sh
```

#### 4. åŸŸåè®¿é—®é—®é¢˜
```bash
# æ£€æŸ¥DNSè§£æ
nslookup hailo-api.yourdomain.com

# æ£€æŸ¥Nginxé…ç½®
nginx -t

# æŸ¥çœ‹Nginxæ—¥å¿—
tail -f /var/log/nginx/error.log
```

### å¥åº·æ£€æŸ¥è„šæœ¬

```bash
#!/bin/bash
# health-check.sh

# æ£€æŸ¥APIæœåŠ¡
if curl -f http://localhost:8000/health; then
    echo "âœ… APIæœåŠ¡æ­£å¸¸"
else
    echo "âŒ APIæœåŠ¡å¼‚å¸¸"
fi

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
if docker exec hailo-redis redis-cli ping | grep -q PONG; then
    echo "âœ… Redisè¿æ¥æ­£å¸¸"
else
    echo "âŒ Redisè¿æ¥å¼‚å¸¸"
fi

# æ£€æŸ¥ç¡¬ä»¶è®¾å¤‡
if ls /dev/hailo* 2>/dev/null; then
    echo "âœ… Hailoè®¾å¤‡æ­£å¸¸"
else
    echo "âŒ Hailoè®¾å¤‡æœªæ£€æµ‹åˆ°"
fi
```

## ğŸ“ˆ æ‰©å±•éƒ¨ç½²

### å¤šèŠ‚ç‚¹éƒ¨ç½²

```yaml
# docker-compose.cluster.yml
version: '3.8'

services:
  hailo-runtime:
    image: hailo8/runtime:2.0.0
    deploy:
      replicas: 3
      placement:
        constraints:
          - node.hostname == worker-1

  hailo-ai-service:
    image: hailo8/ai-service:2.0.0
    deploy:
      replicas: 2
```

### Kuberneteséƒ¨ç½²

```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hailo-runtime
spec:
  replicas: 3
  selector:
    matchLabels:
      app: hailo-runtime
  template:
    spec:
      containers:
      - name: hailo-runtime
        image: hailo8/runtime:2.0.0
        resources:
          limits:
            memory: "4Gi"
            cpu: "2000m"
        volumeMounts:
        - name: hailo-device
          mountPath: /dev/hailo0
      volumes:
      - name: hailo-device
        hostPath:
          path: /dev/hailo0
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- ğŸ“§ é‚®ç®±: support@example.com
- ğŸ› é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/SunvidWong/hailo8/issues)
- ğŸ“– æ–‡æ¡£: [é¡¹ç›®æ–‡æ¡£](https://github.com/SunvidWong/hailo8)

### æ”¯æŒä¿¡æ¯
å¦‚éœ€æŠ€æœ¯æ”¯æŒï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. æœåŠ¡å™¨é…ç½®å’Œæ“ä½œç³»ç»Ÿç‰ˆæœ¬
2. é”™è¯¯æ—¥å¿—å’Œé—®é¢˜æè¿°
3. éƒ¨ç½²é…ç½®æ–‡ä»¶ï¼ˆæ•æ„Ÿä¿¡æ¯å¯åˆ é™¤ï¼‰
4. ç½‘ç»œç¯å¢ƒå’Œé˜²ç«å¢™é…ç½®

---

ğŸ‰ **æ„Ÿè°¢ä½¿ç”¨Hailo8è¿œç¨‹éƒ¨ç½²æ–¹æ¡ˆï¼**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…æ–‡æ¡£æˆ–æäº¤Issueè·å–æ”¯æŒã€‚